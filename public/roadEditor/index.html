<!DOCTYPE html>
<html  style="height: 100%;overflow: hidden;touch-action:none;">
	<head>
		<title>Street Design</title>

		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="stylesheets/roadEditor.css">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

	</head>
	<body  style="background-color: rgb(206, 206, 206); height: 100%; margin:0px;overflow: hidden;user-select: none; " draggable="false" onload="OnLoad();" onresize="ResizeMarkingSpace(100);">
		<div id="mainWindow" draggable="false" class="">
			<div id="leftSlideout">
				<div id="propertyEditor" class="">
				</div>
			</div>
			<div id="sidebar" class="window">
				<div class="utilButtonList window" >
						<div class="window utilButton" id="undoButton" title="復原 (ctrl+z)"><i class="fa-solid fa-rotate-left"></i></div>
						<div class="window utilButton" id="redoButton" title="取消復原 (ctrl+shift+z)"><i class="fa-solid fa-rotate-right"></i></div>
						<div class="window utilButton active" onclick="OnClearLand()" title="清空本段"><i class="fa-regular fa-file-excel"></i></div>
						<div class="window utilButton" id="sectionImportButton" onclick="OnImportFromSection()" ><i class="fa-solid fa-clone"></i></div>
						<!-- developing option -->
						<div class="window utilButton active" onclick="OnClearLocalStorage()" title="清空紀錄(debug)"><i class="fa-solid fa-xmark"></i></div>
						<!-- developing option -->
				</div>

				<div id="componentList" draggable="false" style="margin:2px;">
					<!-- road -->
					<div class="window componentListItem drag" draggable="false" ontouchstart="ComponentDragStart(event)" onmousedown="ComponentDragStart(event)" component="road">
						<div class="componentListItemLabel">
							車道
						</div>
						<div class="componentListItemIcon">
							<div class="road"></div>
						</div>
					</div>
					
					<!-- shoulder -->
					<div class="window componentListItem drag" draggable="false" ontouchstart="ComponentDragStart(event)" onmousedown="ComponentDragStart(event)" component="shoulder">
						<div class="componentListItemLabel">
							停車帶
						</div>
						<div class="componentListItemIcon">
							<div class="shoulder"></div>
						</div>
					</div>

					<!-- slowlane -->
					<div class="window componentListItem drag" draggable="false" ontouchstart="ComponentDragStart(event)" onmousedown="ComponentDragStart(event)" component="slowlane">
						<div class="componentListItemLabel">
							慢車道
						</div>
						<div class="componentListItemIcon">
							<div class="slowlane"></div>
						</div>
					</div>

					<!-- sidewalk -->
					<div class="window componentListItem drag" draggable="false" ontouchstart="ComponentDragStart(event)" onmousedown="ComponentDragStart(event)" component="sidewalk">
						<div class="componentListItemLabel">
							人行道
						</div>
						<div class="componentListItemIcon">
							<div class="sidewalk"></div>
						</div>
					</div>

					<!-- bollard -->
					<div class="window componentListItem drag" draggable="false" ontouchstart="ComponentDragStart(event)" onmousedown="ComponentDragStart(event)" component="bollard">
						<div class="componentListItemLabel">
							分隔島
						</div>
						<div class="componentListItemIcon">
							<div class="bollard"></div>
						</div>
					</div>
				</div>

				<div class="lowerBar window">
					<div  id="prevButton" title="上一步" class="left stageCntlButton active" onclick="OnSwitchSegment(false);">上一步</div>
					<div  id="nextButton" title="下一步" class="right stageCntlButton"onclick="OnSwitchSegment();">下一步</div>
				</div>
			</div>
		
			<div id="editor" class="window" style="margin:2px;">
				<div style="position: absolute; height:100%;width:90%;background-color:rgb(161, 114, 43);left:5%;z-index:-1;"></div>
				<div id="trashcan" class="roadScope"><i style="border: solid 3px;border-radius: 50%;padding: 1rem; font-size:xx-large;color: rgb(206, 206, 206);border-color: rgb(206, 206, 206);" class="fa-solid fa-trash"></i></div>
				<div id="designInfo" class="unusedSection roadScope" style="background-color: white;">
					<div id="leftInfo">
						<div style="width:50%;height:100%;display: flex; justify-content: center;align-items: center;">
							<div id="typeColoringModeBtn" class="window stageCntlButton active" style="line-height:40px; min-width:fit-content ;text-align:center;height:90%; width:90%;" title="切換至類型模式" onclick="OnToggleTypeColoringMode();">預覽模式</div>
						</div>
						<div style="width:50%;height:80%;display:flex;justify-content:center;flex-direction:column;">
							<div style="width:100%;height:30%;">
								<div class="progressCase">
									<div id="stageProgress" class="progressCore"></div>
								</div>
							</div>
							<div style="width:100%;height:70%;display:flex;justify-content:center;">
								<span id="currentStageCount">0</span>
								<span>/</span>
								<span id="totalStageCount">0</span>
							</div>
						</div>
					</div>
					<div id="stageNameInfo" >
						<span id="stageName"></span>
					</div>
					<div id="rightInfo">
						<div id="widthInfo">
							<div onclick="OnClickActivateLandWidthChanger(event);" title="修改腹地寬度">
								<span id="designedWidthIndicator"></span>
								<span>m/</span>
								<span id="landWidthIndicator"></span>
								<span>m</span>
							</div>
							<div id="landWidthChanger" class="">
								<div class="input-group m-1" style="overflow:hidden;">
									<span class="input-group-text" id="basic-addon1" style="white-space: nowrap;">變更寬度</span>
									<input id="newLandWidth" onchange="" type="number" class="form-control"min="2" max="100" step="0.1" aria-describedby="basic-addon1">
									<span class="input-group-text" id="basic-addon1">m</span>
								</div>

								<div style="display:flex; width: 100%;height: 30px;justify-content: center;">
									<button class="cancel" onclick="CancelLandWidthChange()" style="border-top-left-radius: 5px;border-bottom-left-radius: 5px ; border-right: solid white 1px;">取消</button>
									<button class="apply" onclick="ApplyLandWidthChange()" style="border-top-right-radius: 5px;border-bottom-right-radius: 5px ; border-left: solid white 1px;">確認</button>

								</div>
							</div>
						</div>
					</div>
				</div>
				<div id="stopSection" class="unusedSection roadScope" style=""></div>
				<div id="intermidiateSection" class="roadScope unusedSection" style="background-color:dimgray;height:20px;"></div>
				<div id="roadSection" class="unusedSection roadScope "></div>
				
				<div id="warningPopup" class="popupFrame window" onfocusout="OnWarningPopupFocusout(event);"  tabindex="0">
					<div class="frame">
						<div id="warningPopupTitle">錯誤清單</div>
						<hr style="margin-top:5px;margin-bottom:5px;">
						<div id="warningPopupBody"></div>
					</div>
				</div>
				<div id="midErrorWindow" style="opacity:0.5; z-index: 1;position:absolute;width: 50%;height:50%;left: 25%; top: 100px;pointer-events: none;"></div>
			</div>
		
		</div>
		
		<div id="data" style="display:none;">
			<div id="emptyRoadComponentTemplate" class="emptyRoadComponent"></div>
			<div id="roadComponentTemplate" class="roadComponent drag" draggable="false" ontouchstart="ComponentDragStart(event)" onmousedown="ComponentDragStart(event)"></div>
			
			<!-- road -->
			<div id="roadTemplate" class="road component">
				<div class = "roadComponentIcon" draggable="false"></div>
			</div>
			
			<!-- sidewalk -->
			<div id="sidewalkTemplate" class="sidewalk component">
				<div class = "roadComponentIcon" draggable="false"></div>
			</div>

			<!-- bollard -->
			<div id="bollardTemplate" class="bollard component">
				<div class = "roadComponentIcon" draggable="false"></div>
			</div>

			<!-- shoulder -->
			<div id="shoulderTemplate" class="shoulder component">
				<div class = "roadComponentIcon" draggable="false"></div>
			</div>

			
			<!-- slowlane -->
			<div id="slowlaneTemplate" class="slowlane component">
				<div class = "roadComponentIcon" draggable="false"></div>
			</div>
			
		</div>
		
		<script type="module" src="javascripts/roadEditor.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
	</body>
</html>